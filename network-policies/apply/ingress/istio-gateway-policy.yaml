# Istio AuthorizationPolicy at Gateway Level
# Restricts ALL ingress traffic to the cluster to allowed IPs only
#
# IMPORTANT: Update the IP when your IP changes
# Find your IP: curl ifconfig.me

---
apiVersion: security.istio.io/v1
kind: AuthorizationPolicy
metadata:
  name: garden-allow-my-ip
  namespace: istio-system
  labels:
    managed-by: network-policies
spec:
  selector:
    matchLabels:
      app: istio-ingressgateway
  action: ALLOW
  rules:
    # Allow requests from allowed IP only - applies to ALL hosts
    - from:
        - source:
            remoteIpBlocks:
              - "163.223.48.163/32"
              - "103.99.8.235/32"
              - "223.196.173.216/32"
              - "223.196.169.244/32"
              - "223.196.168.13/32"
              - "223.196.173.235/32"
              - "223.196.171.235/32"
