<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>
    <%= title %> | Sri's Garden
  </title>
  <link rel="icon" type="image/png" href="/images/favicon.png">
  <link rel="apple-touch-icon" href="/images/favicon.png">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link
    href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600;700&family=Playfair+Display:wght@400;500;600;700&display=swap"
    rel="stylesheet">
  <link rel="stylesheet" href="/css/style.css">
  <style>
    .version-badge-sm,
    .version-badge {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 600;
      text-transform: uppercase;
    }

    .version-v1 {
      background: #fef3c7;
      color: #92400e;
    }

    .version-v2 {
      background: #d1fae5;
      color: #065f46;
    }

    .version-v3 {
      background: #dbeafe;
      color: #1e40af;
    }

    .version-v4 {
      background: #c7d2fe;
      color: #3730a3;
    }

    .plant-growth-card {
      background: white;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.07);
      transition: all 0.3s;
      cursor: pointer;
    }

    .plant-growth-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.1);
    }

    .plant-growth-header {
      padding: 16px;
      background: linear-gradient(135deg, #065f46 0%, #10b981 100%);
      color: white;
    }

    .plant-growth-header h4 {
      font-size: 18px;
      margin: 0 0 4px 0;
    }

    .plant-growth-header .species {
      opacity: 0.8;
      font-size: 14px;
    }

    .plant-growth-body {
      padding: 16px;
    }

    .version-progress {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 8px;
      margin-bottom: 12px;
    }

    .version-step {
      text-align: center;
      padding: 8px 4px;
      border-radius: 8px;
      transition: all 0.2s;
    }

    .version-step.active {
      background: #d1fae5;
    }

    .version-step.current {
      background: #dbeafe;
      border: 2px solid #3b82f6;
    }

    .version-step .step-icon {
      font-size: 24px;
      margin-bottom: 4px;
    }

    .version-step .step-label {
      font-size: 11px;
      font-weight: 600;
      color: #6b7280;
    }

    .version-step.active .step-label {
      color: #065f46;
    }

    .version-step.current .step-label {
      color: #1e40af;
    }

    .version-thumbnails {
      display: flex;
      gap: 8px;
      margin: 12px 0;
      flex-wrap: wrap;
    }

    .version-thumb {
      position: relative;
      width: 48px;
      height: 48px;
      border-radius: 10px;
      overflow: hidden;
      border: 2px solid #10b981;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    .version-thumb img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .version-thumb .video-indicator {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 100%;
      height: 100%;
      background: linear-gradient(135deg, #dbeafe 0%, #93c5fd 100%);
      font-size: 20px;
    }

    .version-thumb .thumb-label {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      font-size: 9px;
      font-weight: 600;
      text-align: center;
      padding: 2px 0;
    }

    /* Fullview Modal */
    .fullview-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.95);
      z-index: 10000;
      padding: 20px;
      overflow-y: auto;
    }

    .fullview-modal.active {
      display: flex;
      flex-direction: column;
    }

    .fullview-close {
      position: fixed;
      top: 20px;
      right: 20px;
      font-size: 40px;
      color: white;
      cursor: pointer;
      z-index: 10001;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 50%;
      width: 50px;
      height: 50px;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .fullview-content {
      max-width: 900px;
      width: 100%;
      margin: 0 auto;
      color: white;
    }

    .fullview-header {
      text-align: center;
      margin-bottom: 30px;
    }

    .fullview-header h2 {
      font-size: 32px;
      margin-bottom: 8px;
    }

    .version-gallery {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 20px;
    }

    .version-card {
      background: rgba(255, 255, 255, 0.1);
      border-radius: 16px;
      overflow: hidden;
    }

    .version-card-header {
      padding: 12px 16px;
      background: rgba(255, 255, 255, 0.1);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .version-card-header .icon {
      font-size: 24px;
    }

    .version-card-header .title {
      font-weight: 600;
    }

    .version-card-header .status {
      margin-left: auto;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
    }

    .version-card-header .status.done {
      background: #10b981;
    }

    .version-card-header .status.current {
      background: #3b82f6;
    }

    .version-card-header .status.pending {
      background: #6b7280;
    }

    .version-media {
      aspect-ratio: 16/9;
      background: #1f2937;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .version-media img,
    .version-media video {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .video-wrapper .video-controls {
      opacity: 0;
      transition: opacity 0.2s ease;
    }

    .video-wrapper:hover .video-controls {
      opacity: 1;
    }

    .version-media .placeholder {
      font-size: 48px;
      opacity: 0.3;
    }

    /* Version Media Container - shows both image and video */
    .version-media-container {
      background: #1f2937;
      position: relative;
      min-height: 120px;
    }

    .media-item {
      position: relative;
      margin-bottom: 8px;
    }

    .media-item:last-child {
      margin-bottom: 40px;
    }

    .media-item img,
    .media-item video {
      width: 100%;
      max-height: 200px;
      object-fit: cover;
      display: block;
    }

    .media-type-badge {
      position: absolute;
      bottom: 8px;
      left: 8px;
      background: rgba(0, 0, 0, 0.7);
      color: white;
      padding: 4px 10px;
      border-radius: 12px;
      font-size: 11px;
      font-weight: 600;
    }

    .media-placeholder {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      padding: 40px 20px;
    }

    .media-placeholder .placeholder {
      font-size: 48px;
      opacity: 0.3;
    }

    .version-notes {
      padding: 12px 16px;
      font-size: 14px;
      color: #d1d5db;
    }

    @media (max-width: 768px) {
      .version-gallery {
        grid-template-columns: 1fr;
      }
    }

    /* Lightbox for full-size image viewing */
    .lightbox-modal {
      display: none;
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: rgba(0, 0, 0, 0.98);
      z-index: 20000;
      justify-content: center;
      align-items: center;
      cursor: zoom-out;
    }

    .lightbox-modal.active {
      display: flex;
    }

    .lightbox-close {
      position: fixed;
      top: 20px;
      right: 20px;
      font-size: 48px;
      color: white;
      cursor: pointer;
      z-index: 20001;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 50%;
      width: 60px;
      height: 60px;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: transform 0.2s ease;
    }

    .lightbox-close:hover {
      transform: scale(1.1);
    }

    .lightbox-content {
      max-width: 95vw;
      max-height: 95vh;
      object-fit: contain;
      border-radius: 8px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.5);
    }

    .lightbox-caption {
      position: fixed;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      color: white;
      background: rgba(0, 0, 0, 0.7);
      padding: 10px 20px;
      border-radius: 8px;
      font-size: 14px;
    }

    /* Make images clickable in fullview modal */
    .media-item img {
      cursor: zoom-in;
      transition: transform 0.2s ease, box-shadow 0.2s ease;
    }

    .media-item img:hover {
      transform: scale(1.02);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
    }

    .zoom-hint {
      position: absolute;
      bottom: 4px;
      right: 4px;
      background: rgba(0, 0, 0, 0.6);
      color: white;
      font-size: 10px;
      padding: 2px 6px;
      border-radius: 4px;
      pointer-events: none;
    }
  </style>
</head>

<body>
  <nav class="navbar">
    <div class="nav-container">
      <a href="/" class="nav-logo">
        <span class="logo-icon">üåø</span>
        <span class="logo-text">Sri's Garden</span>
      </a>
      <!-- Disk Space Indicator -->
      <div id="diskSpaceIndicator"
        style="display: flex; align-items: center; gap: 6px; font-size: 11px; margin-left: 20px; background: rgba(255,255,255,0.2); padding: 4px 8px; border-radius: 12px; color: #064e3b; font-weight: 500;">
        <span>üíæ Storage:</span>
        <span id="diskFreeSpace">Checking...</span>
      </div>
      <ul class="nav-menu">
        <li><a href="/changelog" class="nav-link">üìú Changelog</a></li>
        <li><a href="/" class="nav-link active">Home</a></li>
        <li><a href="/plants" class="nav-link">Plants</a></li>
        <li><a href="/login" class="nav-link btn-login">üîê Admin</a></li>
      </ul>
    </div>
  </nav>

  <main>
    <!-- Hero Section -->
    <section class="hero hero-with-image">
      <div class="hero-image-container">
        <img src="/images/hero-image.jpg" alt="Sri's Garden" class="hero-image">
        <div class="hero-image-overlay"></div>
      </div>
      <div class="hero-content">
        <h1 class="hero-title">
          <span class="title-accent">Sri's</span> Garden
        </h1>
        <p class="hero-subtitle">Track your leafy vegetables from seed to harvest</p>
      </div>
    </section>

    <!-- Plants with Versions Section -->
    <section class="plants-section">
      <div class="container">
        <h2 class="section-title">üå± Leafy Vegetables Growth Tracker</h2>
        <p style="text-align: center; color: #6b7280; margin-bottom: 24px;">
          V1: Soil Ready ‚Üí V2: Sprouts ‚Üí V3: Growing ‚Üí V4: Harvest Ready
        </p>
        <div class="plants-preview-grid">
          <% if (plants && plants.length> 0) { %>
            <% plants.forEach(plant=> { %>
              <div class="plant-growth-card" onclick="viewPlant('<%= plant._id %>')" data-plant-id="<%= plant._id %>">
                <div class="plant-growth-header">
                  <h4>
                    <% if (plant.currentVersion==='v1' ) { %>üå±
                      <% } else if (plant.currentVersion==='v2' ) { %>üåø
                        <% } else if (plant.currentVersion==='v3' ) { %>ü™¥
                          <% } else { %>ü•¨<% } %>
                              <%= plant.name %>
                  </h4>
                  <div class="species">
                    <%= plant.species || plant.category || 'Leafy Vegetable' %>
                  </div>
                </div>
                <div class="plant-growth-body">
                  <div class="version-progress">
                    <div
                      class="version-step <%= ['v1','v2','v3','v4'].indexOf(plant.currentVersion) >= 0 ? (plant.currentVersion === 'v1' ? 'current' : 'active') : '' %>">
                      <div class="step-icon">üå±</div>
                      <div class="step-label">V1</div>
                    </div>
                    <div
                      class="version-step <%= ['v2','v3','v4'].indexOf(plant.currentVersion) >= 0 ? (plant.currentVersion === 'v2' ? 'current' : 'active') : '' %>">
                      <div class="step-icon">üåø</div>
                      <div class="step-label">V2</div>
                    </div>
                    <div
                      class="version-step <%= ['v3','v4'].indexOf(plant.currentVersion) >= 0 ? (plant.currentVersion === 'v3' ? 'current' : 'active') : '' %>">
                      <div class="step-icon">ü™¥</div>
                      <div class="step-label">V3</div>
                    </div>
                    <div class="version-step <%= plant.currentVersion === 'v4' ? 'current' : '' %>">
                      <div class="step-icon">ü•¨</div>
                      <div class="step-label">V4</div>
                    </div>
                  </div>
                  <% const mediaThumbs=['v1', 'v2' , 'v3' , 'v4' ].filter(v=> plant.versions && plant.versions[v] &&
                    (plant.versions[v].image || plant.versions[v].video || plant.versions[v].file));
                    %>
                    <% if (mediaThumbs.length> 0) { %>
                      <div class="version-thumbnails">
                        <% mediaThumbs.forEach(v=> { %>
                          <div class="version-thumb" title="<%= v.toUpperCase() %> media">
                            <% if (plant.versions[v].image) { %>
                              <img src="<%= plant.versions[v].image %>" alt="<%= v %>">
                              <% } else if (plant.versions[v].video) { %>
                                <span class="video-indicator">üé¨</span>
                                <% } else if (plant.versions[v].file) { %>
                                  <span class="video-indicator"
                                    style="background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%);">üìÑ</span>
                                  <% } %>
                                    <span class="thumb-label">
                                      <%= v.toUpperCase() %>
                                    </span>
                          </div>
                          <% }); %>
                      </div>
                      <% } %>
                        <p style="font-size: 13px; color: #6b7280; margin-bottom: 8px;">
                          <%= (plant.versions && plant.versions[plant.currentVersion] &&
                            plant.versions[plant.currentVersion].notes) || 'Click to view details' %>
                        </p>
                        <span class="version-badge-sm version-<%= plant.currentVersion %>">
                          <%= plant.currentVersion ? plant.currentVersion.toUpperCase() : 'V1' %>
                        </span>
                </div>
              </div>
              <% }) %>
                <% } else { %>
                  <div class="empty-message">
                    <p>No plants yet. <a href="/login">Login to add!</a></p>
                  </div>
                  <% } %>
        </div>
        <div class="section-action">
          <a href="/login" class="btn btn-primary">üîê Admin Dashboard ‚Üí</a>
        </div>
      </div>
    </section>

    <!-- Stats Section -->
    <section class="info-section">
      <div class="container">
        <div class="info-cards">
          <div class="info-card">
            <div class="info-icon">üå±</div>
            <h3>
              <%= plants ? plants.length : 0 %>
            </h3>
            <p>Plants</p>
          </div>
          <div class="info-card">
            <div class="info-icon">üì∑</div>
            <h3>Media</h3>
            <p>Photos & Videos</p>
          </div>
          <div class="info-card">
            <div class="info-icon">üîê</div>
            <h3>Admin</h3>
            <p><a href="/login" style="color: #fcd34d;">Login</a></p>
          </div>
        </div>
      </div>
    </section>
  </main>

  <footer class="footer">
    <div class="container">
      <p>&copy; 2024 Sri's Garden. <a href="/status" style="color: #10b981; text-decoration: none;">Made</a> with üíö</p>
    </div>
  </footer>

  <!-- Fullview Modal (Read-only for home page) -->
  <div id="fullviewModal" class="fullview-modal">
    <div class="fullview-close" onclick="closeFullview()">&times;</div>
    <div class="fullview-content" id="fullviewContent"></div>
  </div>

  <!-- Lightbox Modal for full-size image viewing -->
  <div id="lightboxModal" class="lightbox-modal" onclick="closeLightbox()">
    <div class="lightbox-close" onclick="closeLightbox()">&times;</div>
    <img id="lightboxImage" class="lightbox-content" src="" alt="Full size image" onclick="event.stopPropagation()">
    <div id="lightboxCaption" class="lightbox-caption"></div>
  </div>

  <script>
    // Plants data from server
    const plantsData = <%- JSON.stringify(plants || []) %>;

    function getVersionIcon(version) {
      const icons = { v1: 'üå±', v2: 'üåø', v3: 'ü™¥', v4: 'ü•¨' };
      return icons[version] || 'üå±';
    }

    function viewPlant(plantId) {
      const plant = plantsData.find(p => p._id === plantId);
      if (!plant) {
        localStorage.setItem('openPlantId', plantId);
        window.location.href = '/admin';
        return;
      }
      openFullview(plant);
    }

    function openFullview(plant) {
      const versions = ['v1', 'v2', 'v3', 'v4'];
      const versionNames = {
        v1: 'Prepared Soil',
        v2: 'Sprouts',
        v3: 'Growing',
        v4: 'Ready to Harvest'
      };
      const currentIdx = versions.indexOf(plant.currentVersion);

      const content = document.getElementById('fullviewContent');
      content.innerHTML = `
        <div class="fullview-header">
          <h2>${getVersionIcon(plant.currentVersion)} ${plant.name}</h2>
          <div class="species">${plant.species || plant.category || 'Leafy Vegetable'}</div>
          <div style="margin-top: 16px;">
            <span class="version-badge version-${plant.currentVersion}" style="font-size: 16px; padding: 8px 20px;">
              Currently: ${plant.currentVersion.toUpperCase()} - ${versionNames[plant.currentVersion]}
            </span>
          </div>
          <p style="margin-top: 16px; color: #9ca3af; font-size: 14px;">üîê <a href="/login" style="color: #10b981;">Login as Admin</a> to edit media</p>
        </div>
        
        <div class="version-gallery">
          ${versions.map((v, idx) => {
        const vData = plant.versions?.[v] || {};
        const status = idx < currentIdx ? 'done' : (idx === currentIdx ? 'current' : 'pending');
        const hasVideo = vData.video;
        const hasImage = vData.image;
        const hasFile = vData.file;

        let mediaContent = '';
        // Show all media types if available
        if (hasImage) {
          mediaContent += `
                 <div class="media-item" style="position: relative;">
                   <img src="${vData.image}" alt="${v} image" onclick="event.stopPropagation(); openLightbox('${vData.image}', '${plant.name} - ${v.toUpperCase()}')" title="Click to view full size">
                   <span class="media-type-badge">üì∑ Image</span>
                   <span class="zoom-hint">üîç Click to zoom</span>
                 </div>`;
        }
        if (hasVideo) {
          mediaContent += `
                 <div class="media-item">
                   <div class="video-wrapper" style="position: relative;">
                     <video src="${vData.video}" controls playsinline id="video-${v}"></video>
                     <div class="video-controls" style="position: absolute; bottom: 40px; right: 10px; z-index: 10; background: rgba(0,0,0,0.6); padding: 4px; border-radius: 4px;">
                        <select onchange="document.getElementById('video-${v}').playbackRate = this.value" style="background: transparent; color: white; border: 1px solid white; font-size: 10px; border-radius: 4px; cursor: pointer;">
                          <option value="1">1x</option>
                          <option value="1.25">1.25x</option>
                          <option value="1.5">1.5x</option>
                          <option value="2">2x</option>
                        </select>
                     </div>
                   </div>
                   <span class="media-type-badge">üé¨ Video</span>
                 </div>`;
        }
        if (hasFile) {
          const fileName = vData.fileName || 'Document';
          const fileExt = fileName.split('.').pop().toLowerCase();
          const isPdf = fileExt === 'pdf';
          const docIcons = {
            'pdf': 'üìÑ', 'doc': 'üìù', 'docx': 'üìù',
            'xls': 'üìä', 'xlsx': 'üìä', 'csv': 'üìä',
            'ppt': 'üìΩÔ∏è', 'pptx': 'üìΩÔ∏è',
            'txt': 'üìÉ', 'zip': 'üì¶'
          };
          const fileIcon = docIcons[fileExt] || 'üìÅ';

          mediaContent += `
                 <div class="media-item" style="position: relative;">
                   ${isPdf ?
              `<iframe src="${vData.file}" style="width: 100%; height: 200px; border: none; border-radius: 8px;" title="${fileName}"></iframe>` :
              `<div style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 150px; background: linear-gradient(135deg, #fce7f3 0%, #fbcfe8 100%); border-radius: 8px;">
                           <div style="font-size: 48px; margin-bottom: 8px;">${fileIcon}</div>
                           <div style="font-size: 12px; color: #374151; font-weight: 500; text-align: center; padding: 0 16px; word-break: break-word;">${fileName}</div>
                       </div>`
            }
                   <div style="position: absolute; top: 8px; right: 8px; display: flex; gap: 8px; z-index: 20;">
                       <a href="${vData.file}" target="_blank" onclick="event.stopPropagation()" title="View File" style="background: rgba(59, 130, 246, 0.9); color: white; border: none; border-radius: 8px; width: 32px; height: 32px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 14px; text-decoration: none;">üëÅÔ∏è</a>
                       <a href="${vData.file}" download="${fileName}" onclick="event.stopPropagation()" title="Download File" style="background: rgba(16, 185, 129, 0.9); color: white; border: none; border-radius: 8px; width: 32px; height: 32px; cursor: pointer; display: flex; align-items: center; justify-content: center; font-size: 14px; text-decoration: none;">‚¨áÔ∏è</a>
                   </div>
                   <span class="media-type-badge">${fileIcon} File</span>
                 </div>`;
        }
        if (!hasImage && !hasVideo && !hasFile) {
          mediaContent = `<div class="media-placeholder"><span class="placeholder">${status === 'pending' ? '‚è≥' : 'üì∑'}</span><p>No media added yet</p></div>`;
        }

        return `
              <div class="version-card">
                <div class="version-card-header">
                  <span class="icon">${getVersionIcon(v)}</span>
                  <span class="title">${v.toUpperCase()} - ${versionNames[v]}</span>
                  <span class="status ${status}">${status === 'done' ? '‚úì Done' : (status === 'current' ? '‚óè Current' : '‚óã Pending')}</span>
                </div>
                <div class="version-media-container" style="cursor: default;">
                  ${mediaContent}
                </div>
                <div class="version-notes">
                  ${vData.notes || (status === 'pending' ? 'Not yet reached' : 'No notes added')}
                  ${vData.date ? `<div style="font-size: 11px; margin-top: 4px; opacity: 0.6;">üìÖ ${new Date(vData.date).toLocaleDateString()}</div>` : ''}
                </div>
              </div>
            `;
      }).join('')}
        </div>
      `;

      document.getElementById('fullviewModal').classList.add('active');
    }

    function closeFullview() {
      document.getElementById('fullviewModal').classList.remove('active');
      document.body.style.overflow = '';
    }

    function openLightbox(src, caption) {
      const modal = document.getElementById('lightboxModal');
      const img = document.getElementById('lightboxImage');
      const captionEl = document.getElementById('lightboxCaption');

      img.src = src;
      captionEl.textContent = caption || '';
      modal.classList.add('active');
      document.body.style.overflow = 'hidden';
    }

    function closeLightbox() {
      document.getElementById('lightboxModal').classList.remove('active');
      document.body.style.overflow = '';
    }

    document.addEventListener('keydown', (e) => {
      if (e.key === 'Escape') {
        if (document.getElementById('lightboxModal').classList.contains('active')) {
          closeLightbox();
        } else {
          closeFullview();
        }
      }
    });

    // Fetch and display disk usage
    // Fetch and display disk usage
    async function updateDiskSpace() {
      try {
        const response = await fetch('/api/system/disk');
        if (!response.ok) throw new Error('Network response was not ok');
        const data = await response.json();

        const formatSize = (bytes) => {
          if (bytes === 0) return '0 B';
          const k = 1024, sizes = ['B', 'KB', 'MB', 'GB', 'TB'];
          const i = Math.floor(Math.log(bytes) / Math.log(k));
          return parseFloat((bytes / Math.pow(k, i)).toFixed(1)) + ' ' + sizes[i];
        };

        const freeEl = document.getElementById('diskFreeSpace');
        const indicatorEl = document.getElementById('diskSpaceIndicator');

        if (freeEl && indicatorEl) {
          freeEl.textContent = formatSize(data.free) + ' free';
          indicatorEl.title = `Total: ${formatSize(data.total)}`;
        }
      } catch (e) {
        console.error('Disk check failed', e);
        const freeEl = document.getElementById('diskFreeSpace');
        if (freeEl) freeEl.textContent = 'Unknown';
      }
    }

    // Run after DOM load
    document.addEventListener('DOMContentLoaded', updateDiskSpace);
    // Also try immediately just in case
    updateDiskSpace();
  </script>
</body>

</html>